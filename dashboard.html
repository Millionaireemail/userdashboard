<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dashboard - Millionaire Email</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body class="dashboard-body">
  <div class="dashboard-container">
    <header class="dashboard-header">
      <div class="header-left">
        <img src="https://logo.millionaire.email/logo.svg" alt="Logo" class="logo-small">
        <h1>Account Dashboard</h1>
      </div>
      <div class="header-right">
        <span id="user-email"></span>
        <button id="logoutBtn" class="btn-secondary">Logout</button>
      </div>
    </header>

    <main class="dashboard-grid">
      <!-- Storage -->
      <section class="card">
        <h2>Storage</h2>
        <p id="storage-info">Loading...</p>
      </section>

      <!-- Aliases -->
      <section class="card">
        <h2>Aliases <span class="small">(max 10)</span></h2>
        <ul id="aliases-list"></ul>
        <div class="input-group">
          <input type="text" id="new-alias" placeholder="new-alias@millionaire.email">
          <button id="add-alias-btn" class="btn-small">Add</button>
        </div>
        <p class="error" id="aliases-error"></p>
      </section>

      <!-- Change Password -->
      <section class="card">
        <h2>Change Password</h2>
        <input type="password" id="new-password" placeholder="New password">
        <button id="change-pw-btn" class="btn">Update</button>
        <p class="success" id="pw-success"></p>
        <p class="error" id="pw-error"></p>
      </section>

      <!-- Encryption at Rest -->
      <section class="card">
        <h2>Encryption at Rest</h2>
        <select id="enc-type">
          <option value="pgp">OpenPGP</option>
          <option value="smime">S/MIME</option>
        </select>
        <textarea id="public-key" rows="6" placeholder="Paste your public key block here..."></textarea>
        <button id="upload-key-btn" class="btn">Upload Key</button>
        <p class="success" id="enc-success"></p>
        <p class="error" id="enc-error"></p>
      </section>

      <!-- 2FA -->
      <section class="card">
        <h2>Two-Factor Authentication</h2>
        <p id="otp-status">Loading...</p>
        <div id="otp-setup" class="hidden">
          <div id="qr-code" class="qr-container"></div>
          <input type="text" id="otp-code" placeholder="Enter 6-digit code">
          <button id="verify-otp-btn" class="btn-small">Verify & Enable</button>
        </div>
        <button id="toggle-otp-btn" class="btn">Enable 2FA</button>
        <p class="error" id="otp-error"></p>
      </section>

      <!-- Delete Account -->
      <section class="card danger">
        <h2>Delete Account</h2>
        <p>This action is permanent. We will delete your account within 24 hours.</p>
        <button id="delete-request-btn" class="btn-danger">Request Deletion</button>
        <p class="success hidden" id="delete-msg">Request sent. Your account will be deleted within 24 hours.</p>
      </section>
    </main>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <script src="assets/js/stalwart.api.js"></script>
  <script src="assets/js/dashboard.js"></script>
</body>
</html>
